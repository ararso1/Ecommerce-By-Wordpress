(()=>{const e="lp-target";document.addEventListener("click",(e=>{const s=e.target;s.classList.contains("students-list-btn-load-more")&&(e.preventDefault(),t(s))})),document.addEventListener("change",(e=>{const t=e.target;"students-list-filter-select"===t.id&&s(t)}));const t=t=>{const s=t.closest(`.${e}`),a=t.querySelector(".lp-loading-no-css"),n={...JSON.parse(s.dataset.send)},l=s.querySelector(".lp-students-list-wrapper");n.args.hasOwnProperty("paged")||(n.args.paged=1),n.args.paged++,s.dataset.send=JSON.stringify(n),a&&a.classList.remove("hide");const o={success:e=>{const{status:s,message:a,data:n}=e,{total_pages:o,paged:c}=n,d=document.createElement("div");d.innerHTML=n.content;const r=d.querySelectorAll(".lp-student-enrolled");r.length&&r.forEach((e=>{l.insertAdjacentElement("beforeend",e)})),c>=o&&t.remove()},error:e=>{console.log(e)},completed:()=>{a&&a.classList.add("hide"),t.classList.remove("disabled")}};window.lpAJAXG.fetchAJAX(n,o)},s=t=>{const s=t.closest(`.${e}`),a={...JSON.parse(s.dataset.send)},n=s.closest(".lp-load-ajax-element").querySelector(".lp-loading-change");n&&(n.style.display="block"),a.args.paged=1,a.args.status=t.value,s.dataset.send=JSON.stringify(a);const l={success:e=>{const{status:t,message:a,data:n}=e;s.innerHTML=n.content},error:e=>{console.log(e)},completed:()=>{n&&(n.style.display="none")}};window.lpAJAXG.fetchAJAX(a,l)}})();